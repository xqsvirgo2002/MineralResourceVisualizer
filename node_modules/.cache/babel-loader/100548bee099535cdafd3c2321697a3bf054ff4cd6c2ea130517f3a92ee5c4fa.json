{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as echarts from 'echarts';\nexport default {\n  name: 'MineralProductionHeatmap',\n  data() {\n    return {\n      heatmapInstance: null,\n      heatmapData: [],\n      minerals: [],\n      countries: [],\n      years: ['2017', '2018', '2019', '2020', '2021']\n    };\n  },\n  mounted() {\n    this.loadHeatmapData();\n  },\n  methods: {\n    loadHeatmapData() {\n      import('@/assets/output.json').then(data => {\n        this.minerals = Object.keys(data);\n\n        // 处理国家列表\n        let countrySet = new Set();\n        Object.values(data).forEach(mineralData => {\n          if (Array.isArray(mineralData)) {\n            mineralData.forEach(item => countrySet.add(item.Country));\n          }\n        });\n        this.countries = Array.from(countrySet);\n\n        // 处理热力图数据\n        this.minerals.forEach((mineral, mineralIndex) => {\n          let mineralData = data[mineral];\n          if (Array.isArray(mineralData)) {\n            mineralData.forEach(countryData => {\n              this.years.forEach(year => {\n                const countryIndex = this.countries.indexOf(countryData.Country);\n                this.heatmapData.push([mineralIndex, countryIndex, countryData[year] || 0]);\n              });\n            });\n          }\n        });\n        this.initHeatmap();\n      });\n    },\n    initHeatmap() {\n      const heatmapDom = this.$refs.MineralProductionHeatmap;\n      this.heatmapInstance = echarts.init(heatmapDom);\n      const options = {\n        title: {\n          text: '不同矿产在各国各年份的生产量热力图',\n          left: 'center'\n        },\n        tooltip: {\n          position: 'top'\n        },\n        xAxis: {\n          type: 'category',\n          data: this.minerals\n        },\n        yAxis: {\n          type: 'category',\n          data: this.countries\n        },\n        visualMap: {\n          min: 0,\n          max: 600000000,\n          // 根据数据集的最大值进行调整\n          calculable: true,\n          orient: 'horizontal',\n          left: 'center',\n          bottom: '15%'\n        },\n        series: [{\n          name: '生产量',\n          type: 'heatmap',\n          data: this.heatmapData,\n          label: {\n            show: true\n          },\n          emphasis: {\n            itemStyle: {\n              shadowBlur: 10,\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\n            }\n          }\n        }]\n      };\n      this.heatmapInstance.setOption(options);\n    }\n  }\n};","map":{"version":3,"names":["echarts","name","data","heatmapInstance","heatmapData","minerals","countries","years","mounted","loadHeatmapData","methods","then","Object","keys","countrySet","Set","values","forEach","mineralData","Array","isArray","item","add","Country","from","mineral","mineralIndex","countryData","year","countryIndex","indexOf","push","initHeatmap","heatmapDom","$refs","MineralProductionHeatmap","init","options","title","text","left","tooltip","position","xAxis","type","yAxis","visualMap","min","max","calculable","orient","bottom","series","label","show","emphasis","itemStyle","shadowBlur","shadowColor","setOption"],"sources":["src/components/GlobalMineralHeatMap.vue"],"sourcesContent":["<template>\n    <div>\n        <el-row :gutter=\"20\">\n            <el-col :span=\"24\">\n                <el-card class=\"chart-card\">\n                    <div ref=\"MineralProductionHeatmap\" class=\"chart\"></div>\n                </el-card>\n            </el-col>\n        </el-row>\n        <!-- 这里可以添加分析文本 -->\n    </div>\n</template>\n\n<script>\nimport * as echarts from 'echarts';\n\nexport default {\n    name: 'MineralProductionHeatmap',\n    data() {\n        return {\n            heatmapInstance: null,\n            heatmapData: [],\n            minerals: [],\n            countries: [],\n            years: ['2017', '2018', '2019', '2020', '2021']\n        };\n    },\n    mounted() {\n        this.loadHeatmapData();\n    },\n    methods: {\n        loadHeatmapData() {\n            import('@/assets/output.json').then(data => {\n                this.minerals = Object.keys(data);\n\n                // 处理国家列表\n                let countrySet = new Set();\n                Object.values(data).forEach(mineralData => {\n                    if (Array.isArray(mineralData)) {\n                        mineralData.forEach(item => countrySet.add(item.Country));\n                    }\n                });\n                this.countries = Array.from(countrySet);\n\n                // 处理热力图数据\n                this.minerals.forEach((mineral, mineralIndex) => {\n                    let mineralData = data[mineral];\n                    if (Array.isArray(mineralData)) {\n                        mineralData.forEach(countryData => {\n                            this.years.forEach(year => {\n                                const countryIndex = this.countries.indexOf(countryData.Country);\n                                this.heatmapData.push([mineralIndex, countryIndex, countryData[year] || 0]);\n                            });\n                        });\n                    }\n                });\n\n                this.initHeatmap();\n            });\n        },\n        initHeatmap() {\n            const heatmapDom = this.$refs.MineralProductionHeatmap;\n            this.heatmapInstance = echarts.init(heatmapDom);\n\n            const options = {\n                title: {\n                    text: '不同矿产在各国各年份的生产量热力图',\n                    left: 'center'\n                },\n                tooltip: {\n                    position: 'top'\n                },\n                xAxis: {\n                    type: 'category',\n                    data: this.minerals\n                },\n                yAxis: {\n                    type: 'category',\n                    data: this.countries\n                },\n                visualMap: {\n                    min: 0,\n                    max: 600000000, // 根据数据集的最大值进行调整\n                    calculable: true,\n                    orient: 'horizontal',\n                    left: 'center',\n                    bottom: '15%'\n                },\n                series: [{\n                    name: '生产量',\n                    type: 'heatmap',\n                    data: this.heatmapData,\n                    label: {\n                        show: true\n                    },\n                    emphasis: {\n                        itemStyle: {\n                            shadowBlur: 10,\n                            shadowColor: 'rgba(0, 0, 0, 0.5)'\n                        }\n                    }\n                }]\n            };\n\n            this.heatmapInstance.setOption(options);\n        }\n    }\n};\n</script>\n\n\n<style scoped>\n/* 添加自定义样式 */\n.chart {\n    width: 100%;\n    height: 700px; /* 为热力图调整高度 */\n    margin-top: 20px;\n}\n</style>\n"],"mappings":";AAcA,YAAAA,OAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,eAAA;MACAC,WAAA;MACAC,QAAA;MACAC,SAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,eAAA;EACA;EACAC,OAAA;IACAD,gBAAA;MACA,+BAAAE,IAAA,CAAAT,IAAA;QACA,KAAAG,QAAA,GAAAO,MAAA,CAAAC,IAAA,CAAAX,IAAA;;QAEA;QACA,IAAAY,UAAA,OAAAC,GAAA;QACAH,MAAA,CAAAI,MAAA,CAAAd,IAAA,EAAAe,OAAA,CAAAC,WAAA;UACA,IAAAC,KAAA,CAAAC,OAAA,CAAAF,WAAA;YACAA,WAAA,CAAAD,OAAA,CAAAI,IAAA,IAAAP,UAAA,CAAAQ,GAAA,CAAAD,IAAA,CAAAE,OAAA;UACA;QACA;QACA,KAAAjB,SAAA,GAAAa,KAAA,CAAAK,IAAA,CAAAV,UAAA;;QAEA;QACA,KAAAT,QAAA,CAAAY,OAAA,EAAAQ,OAAA,EAAAC,YAAA;UACA,IAAAR,WAAA,GAAAhB,IAAA,CAAAuB,OAAA;UACA,IAAAN,KAAA,CAAAC,OAAA,CAAAF,WAAA;YACAA,WAAA,CAAAD,OAAA,CAAAU,WAAA;cACA,KAAApB,KAAA,CAAAU,OAAA,CAAAW,IAAA;gBACA,MAAAC,YAAA,QAAAvB,SAAA,CAAAwB,OAAA,CAAAH,WAAA,CAAAJ,OAAA;gBACA,KAAAnB,WAAA,CAAA2B,IAAA,EAAAL,YAAA,EAAAG,YAAA,EAAAF,WAAA,CAAAC,IAAA;cACA;YACA;UACA;QACA;QAEA,KAAAI,WAAA;MACA;IACA;IACAA,YAAA;MACA,MAAAC,UAAA,QAAAC,KAAA,CAAAC,wBAAA;MACA,KAAAhC,eAAA,GAAAH,OAAA,CAAAoC,IAAA,CAAAH,UAAA;MAEA,MAAAI,OAAA;QACAC,KAAA;UACAC,IAAA;UACAC,IAAA;QACA;QACAC,OAAA;UACAC,QAAA;QACA;QACAC,KAAA;UACAC,IAAA;UACA1C,IAAA,OAAAG;QACA;QACAwC,KAAA;UACAD,IAAA;UACA1C,IAAA,OAAAI;QACA;QACAwC,SAAA;UACAC,GAAA;UACAC,GAAA;UAAA;UACAC,UAAA;UACAC,MAAA;UACAV,IAAA;UACAW,MAAA;QACA;QACAC,MAAA;UACAnD,IAAA;UACA2C,IAAA;UACA1C,IAAA,OAAAE,WAAA;UACAiD,KAAA;YACAC,IAAA;UACA;UACAC,QAAA;YACAC,SAAA;cACAC,UAAA;cACAC,WAAA;YACA;UACA;QACA;MACA;MAEA,KAAAvD,eAAA,CAAAwD,SAAA,CAAAtB,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
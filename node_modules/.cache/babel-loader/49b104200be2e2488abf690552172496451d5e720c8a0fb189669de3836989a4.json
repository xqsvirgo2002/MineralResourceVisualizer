{"ast":null,"code":"import * as echarts from 'echarts';\nimport mineralsData from '@/assets/minerals_production.json'; // 根据实际路径更新\nimport { Dialog } from 'element-ui';\nexport default {\n  name: 'WorldMap',\n  components: {\n    ElDialog: Dialog\n  },\n  data() {\n    return {\n      selectedCountry: '',\n      selectedCountryMinerals: [],\n      dialogVisible: false,\n      searchQuery: ''\n    };\n  },\n  mounted() {\n    import('@/assets/world.js').then(() => {\n      var chart = echarts.init(document.getElementById('map'));\n      var option = {\n        series: [{\n          type: 'map',\n          map: 'world'\n        }]\n      };\n      chart.setOption(option);\n      chart.on('click', this.handleCountryClick);\n    });\n  },\n  methods: {\n    handleBeforeClose(done) {\n      this.dialogVisible = false;\n      done(); // 调用 done 来正式关闭对话框\n    },\n    handleCountryClick(params) {\n      this.selectedCountry = params.name;\n      this.selectedCountryMinerals = mineralsData[this.selectedCountry] || [];\n      this.dialogVisible = true;\n    },\n    searchCountry() {\n      if (!this.searchQuery) return;\n\n      // 更新国家矿产数据\n      this.selectedCountry = this.searchQuery;\n      this.selectedCountryMinerals = mineralsData[this.selectedCountry] || [];\n      this.dialogVisible = true;\n      this.addMarker(this.selectedCountry);\n      // 在地图上定位国家（需要实现定位逻辑）\n      // 注意：这部分取决于您的地图库和数据结构\n      // 您可能需要一种方式来将国家名称转换为地图坐标\n    },\n    addMarker(countryName) {\n      // 这里我们假设您有一个方法来获取国家的坐标\n      const coordinates = this.getCountryCoordinates(countryName);\n      if (coordinates) {\n        var option = {\n          series: [{\n            // 根据需要选择适当的系列类型\n            type: 'effectScatter',\n            // 使用闪烁效果的散点图表示标记\n            coordinateSystem: 'geo',\n            data: [{\n              name: countryName,\n              value: [...coordinates, 100] // 经纬度加数据值\n            }]\n            // 其他配置...\n          }]\n          // 其他全局配置...\n        };\n        this.chartInstance.setOption(option);\n      }\n    },\n    getCountryCoordinates(countryName) {\n      // 这里是获取国家坐标的逻辑\n      // 您可能需要一个国家名称到坐标的映射\n      // 这取决于您的数据结构和可用数据\n    }\n  }\n};","map":{"version":3,"names":["echarts","mineralsData","Dialog","name","components","ElDialog","data","selectedCountry","selectedCountryMinerals","dialogVisible","searchQuery","mounted","then","chart","init","document","getElementById","option","series","type","map","setOption","on","handleCountryClick","methods","handleBeforeClose","done","params","searchCountry","addMarker","countryName","coordinates","getCountryCoordinates","coordinateSystem","value","chartInstance"],"sources":["src/components/WorldMap.vue"],"sourcesContent":["<template>\n    <div class=\"map-container\">\n        <div class=\"search-container\">\n            <el-input v-model=\"searchQuery\" placeholder=\"输入国家名称\" @keyup.enter=\"searchCountry\"></el-input>\n            <el-button type=\"primary\" @click=\"searchCountry\">搜索</el-button>\n        </div>\n        <div id=\"map\"></div>\n        <el-dialog :visible.sync=\"dialogVisible\" :title=\"selectedCountry + ' 的矿产资源(单位：吨/立方米)'\" width=\"60%\"\n            :before-close=\"handleBeforeClose\" class=\"custom-dialog\">\n            <div v-if=\"selectedCountryMinerals.length\">\n                <ul class=\"mineral-list\">\n                    <li v-for=\"mineral in selectedCountryMinerals\" :key=\"mineral.Minerals\">\n                        {{ mineral.Minerals }}: {{ mineral.Production }}\n                    </li>\n                </ul>\n            </div>\n            <div v-else>\n                <p>未记录该国家矿产资源的信息。</p>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n  \n<script>\nimport * as echarts from 'echarts';\nimport mineralsData from '@/assets/minerals_production.json'; // 根据实际路径更新\nimport { Dialog } from 'element-ui';\n\nexport default {\n    name: 'WorldMap',\n    components: {\n        ElDialog: Dialog\n    },\n    data() {\n        return {\n            selectedCountry: '',\n            selectedCountryMinerals: [],\n            dialogVisible: false,\n            searchQuery: ''\n        };\n    },\n    mounted() {\n        import('@/assets/world.js').then(() => {\n            var chart = echarts.init(document.getElementById('map'));\n            var option = {\n                series: [\n                    {\n                        type: 'map',\n                        map: 'world',\n                    }\n                ]\n            };\n\n            chart.setOption(option);\n            chart.on('click', this.handleCountryClick);\n        });\n    },\n    methods: {\n        handleBeforeClose(done) {\n            this.dialogVisible = false;\n            done(); // 调用 done 来正式关闭对话框\n        },\n        handleCountryClick(params) {\n            this.selectedCountry = params.name;\n            this.selectedCountryMinerals = mineralsData[this.selectedCountry] || [];\n            this.dialogVisible = true;\n        },\n        searchCountry() {\n            if (!this.searchQuery) return;\n\n            // 更新国家矿产数据\n            this.selectedCountry = this.searchQuery;\n            this.selectedCountryMinerals = mineralsData[this.selectedCountry] || [];\n            this.dialogVisible = true;\n            this.addMarker(this.selectedCountry);\n            // 在地图上定位国家（需要实现定位逻辑）\n            // 注意：这部分取决于您的地图库和数据结构\n            // 您可能需要一种方式来将国家名称转换为地图坐标\n        },\n        addMarker(countryName) {\n            // 这里我们假设您有一个方法来获取国家的坐标\n            const coordinates = this.getCountryCoordinates(countryName);\n\n            if (coordinates) {\n                var option = {\n                    series: [\n                        {\n                            // 根据需要选择适当的系列类型\n                            type: 'effectScatter', // 使用闪烁效果的散点图表示标记\n                            coordinateSystem: 'geo',\n                            data: [\n                                {\n                                    name: countryName,\n                                    value: [...coordinates, 100] // 经纬度加数据值\n                                }\n                            ],\n                            // 其他配置...\n                        }\n                    ]\n                    // 其他全局配置...\n                };\n\n                this.chartInstance.setOption(option);\n            }\n        },\n\n        getCountryCoordinates(countryName) {\n            // 这里是获取国家坐标的逻辑\n            // 您可能需要一个国家名称到坐标的映射\n            // 这取决于您的数据结构和可用数据\n        },\n    }\n}\n</script>\n  \n<style>\n.search-container {\n    padding: 10px;\n    text-align: center;\n}\n\n.custom-dialog .el-dialog {\n    background-color: #f5f5f5;\n    /* 设置对话框背景颜色为浅灰色 */\n    border-radius: 8px;\n}\n\n.custom-dialog .el-dialog__header {\n    color: #333;\n    font-size: 18px;\n}\n\n.custom-dialog .el-dialog__body {\n    font-size: 16px;\n    color: #343434c6;\n}\n\n.mineral-list {\n    list-style-type: none;\n    padding: 0;\n}\n\n.mineral-list li {\n    margin: 10px 0;\n    font-weight: bold;\n}\n\n.map-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 70vh;\n}\n\n#map {\n    width: 1000px;\n    height: 800px;\n}\n</style>\n  "],"mappings":"AAwBA,YAAAA,OAAA;AACA,OAAAC,YAAA;AACA,SAAAC,MAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAC,QAAA,EAAAH;EACA;EACAI,KAAA;IACA;MACAC,eAAA;MACAC,uBAAA;MACAC,aAAA;MACAC,WAAA;IACA;EACA;EACAC,QAAA;IACA,4BAAAC,IAAA;MACA,IAAAC,KAAA,GAAAb,OAAA,CAAAc,IAAA,CAAAC,QAAA,CAAAC,cAAA;MACA,IAAAC,MAAA;QACAC,MAAA,GACA;UACAC,IAAA;UACAC,GAAA;QACA;MAEA;MAEAP,KAAA,CAAAQ,SAAA,CAAAJ,MAAA;MACAJ,KAAA,CAAAS,EAAA,eAAAC,kBAAA;IACA;EACA;EACAC,OAAA;IACAC,kBAAAC,IAAA;MACA,KAAAjB,aAAA;MACAiB,IAAA;IACA;IACAH,mBAAAI,MAAA;MACA,KAAApB,eAAA,GAAAoB,MAAA,CAAAxB,IAAA;MACA,KAAAK,uBAAA,GAAAP,YAAA,MAAAM,eAAA;MACA,KAAAE,aAAA;IACA;IACAmB,cAAA;MACA,UAAAlB,WAAA;;MAEA;MACA,KAAAH,eAAA,QAAAG,WAAA;MACA,KAAAF,uBAAA,GAAAP,YAAA,MAAAM,eAAA;MACA,KAAAE,aAAA;MACA,KAAAoB,SAAA,MAAAtB,eAAA;MACA;MACA;MACA;IACA;IACAsB,UAAAC,WAAA;MACA;MACA,MAAAC,WAAA,QAAAC,qBAAA,CAAAF,WAAA;MAEA,IAAAC,WAAA;QACA,IAAAd,MAAA;UACAC,MAAA,GACA;YACA;YACAC,IAAA;YAAA;YACAc,gBAAA;YACA3B,IAAA,GACA;cACAH,IAAA,EAAA2B,WAAA;cACAI,KAAA,MAAAH,WAAA;YACA;YAEA;UACA;UAEA;QACA;QAEA,KAAAI,aAAA,CAAAd,SAAA,CAAAJ,MAAA;MACA;IACA;IAEAe,sBAAAF,WAAA;MACA;MACA;MACA;IAAA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
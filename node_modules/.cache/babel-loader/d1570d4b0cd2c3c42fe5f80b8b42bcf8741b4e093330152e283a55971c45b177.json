{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport * as echarts from 'echarts';\nexport default {\n  name: 'MiningAreaChart',\n  data() {\n    return {\n      chartData: [],\n      // 完整的饼图数据\n      mainPieData: [],\n      // 主饼图数据\n      subPieData: [],\n      // 子饼图数据\n      totalSubPieArea: 0 // 子饼图数据总和\n    };\n  },\n  mounted() {\n    this.loadChartData();\n  },\n  methods: {\n    loadChartData() {\n      // 注意：更换为您的实际JSON文件路径\n      axios.get('/mining_area_data.json').then(response => {\n        const data = response.data;\n        const totalArea = data.reduce((sum, item) => sum + item.AREA, 0);\n        const threshold = totalArea * 0.01; // 设置阈值为1%的总面积\n\n        // 主饼图和子饼图数据分割\n        this.chartData = data;\n        this.mainPieData = data.filter(item => item.AREA >= threshold);\n        this.subPieData = data.filter(item => item.AREA < threshold);\n        // 计算子饼图数据的总和\n        this.totalSubPieArea = this.subPieData.reduce((sum, item) => sum + item.AREA, 0);\n\n        // 将子饼图数据总和添加到主饼图\n        this.mainPieData.push({\n          COUNTRY_NAME: '其他',\n          AREA: this.totalSubPieArea\n        });\n        this.createChart();\n      }).catch(error => console.error('Error loading the JSON file:', error));\n    },\n    createChart() {\n      const chartDom = document.getElementById('chart');\n      const myChart = echarts.init(chartDom);\n      const option = {\n        tooltip: {\n          trigger: 'item',\n          formatter: '{a} <br/>{b}: {c} ({d}%)'\n        },\n        legend: {\n          orient: 'vertical',\n          left: 'right',\n          // 将图例放置在右边\n          top: 'middle',\n          // 垂直居中\n          align: 'left',\n          // 文本与图例标记对齐\n          // 只显示主饼图的图例\n          data: this.mainPieData.map(item => item.COUNTRY_NAME)\n        },\n        series: [{\n          name: '矿区面积',\n          type: 'pie',\n          selectedMode: 'single',\n          radius: [0, '30%'],\n          label: {\n            position: 'inner',\n            formatter: '{b}'\n          },\n          data: this.mainPieData.map(item => ({\n            name: item.COUNTRY_NAME,\n            value: item.AREA\n          }))\n        }, {\n          name: '详细分类',\n          type: 'pie',\n          radius: ['40%', '55%'],\n          labelLine: {\n            length: 20\n          },\n          data: this.subPieData.map(item => ({\n            name: item.COUNTRY_NAME,\n            value: item.AREA\n          }))\n        }]\n      };\n      myChart.setOption(option);\n    }\n  }\n};","map":{"version":3,"names":["axios","echarts","name","data","chartData","mainPieData","subPieData","totalSubPieArea","mounted","loadChartData","methods","get","then","response","totalArea","reduce","sum","item","AREA","threshold","filter","push","COUNTRY_NAME","createChart","catch","error","console","chartDom","document","getElementById","myChart","init","option","tooltip","trigger","formatter","legend","orient","left","top","align","map","series","type","selectedMode","radius","label","position","value","labelLine","length","setOption"],"sources":["src/components/MiningAreaChart.vue"],"sourcesContent":["<template>\n  <div class=\"chart-container\">\n    <h1>矿区面积分布</h1>\n    <div id=\"chart\" style=\"height: 500px; width: 100%;\"></div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport * as echarts from 'echarts';\n\nexport default {\n  name: 'MiningAreaChart',\n  data() {\n    return {\n      chartData: [], // 完整的饼图数据\n      mainPieData: [], // 主饼图数据\n      subPieData: [],  // 子饼图数据\n      totalSubPieArea: 0 // 子饼图数据总和\n    };\n  },\n  mounted() {\n    this.loadChartData();\n  },\n  methods: {\n    loadChartData() {\n      // 注意：更换为您的实际JSON文件路径\n      axios.get('/mining_area_data.json')\n        .then(response => {\n          const data = response.data;\n          const totalArea = data.reduce((sum, item) => sum + item.AREA, 0);\n          const threshold = totalArea * 0.01; // 设置阈值为1%的总面积\n\n          // 主饼图和子饼图数据分割\n          this.chartData = data;\n          this.mainPieData = data.filter(item => item.AREA >= threshold);\n          this.subPieData = data.filter(item => item.AREA < threshold);\n          // 计算子饼图数据的总和\n          this.totalSubPieArea = this.subPieData.reduce((sum, item) => sum + item.AREA, 0);\n\n          // 将子饼图数据总和添加到主饼图\n          this.mainPieData.push({ COUNTRY_NAME: '其他', AREA: this.totalSubPieArea });\n\n          this.createChart();\n        })\n        .catch(error => console.error('Error loading the JSON file:', error));\n    },\n    createChart() {\n      const chartDom = document.getElementById('chart');\n      const myChart = echarts.init(chartDom);\n      const option = {\n        tooltip: {\n          trigger: 'item',\n          formatter: '{a} <br/>{b}: {c} ({d}%)'\n        },\n        legend: {\n          orient: 'vertical',\n          left: 'right', // 将图例放置在右边\n          top: 'middle', // 垂直居中\n          align: 'left', // 文本与图例标记对齐\n          // 只显示主饼图的图例\n          data: this.mainPieData.map(item => item.COUNTRY_NAME),\n        },\n        series: [\n          {\n            name: '矿区面积',\n            type: 'pie',\n            selectedMode: 'single',\n            radius: [0, '30%'],\n            label: {\n              position: 'inner',\n              formatter: '{b}',\n            },\n            data: this.mainPieData.map(item => ({\n              name: item.COUNTRY_NAME,\n              value: item.AREA\n            }))\n          },\n          {\n            name: '详细分类',\n            type: 'pie',\n            radius: ['40%', '55%'],\n            labelLine: {\n              length: 20\n            },\n            data: this.subPieData.map(item => ({\n              name: item.COUNTRY_NAME,\n              value: item.AREA\n            }))\n          }\n        ]\n      };\n      myChart.setOption(option);\n    }\n  }\n}\n</script>\n\n<style>\n.chart-container {\n  width: 100%;\n  max-width: 1280px;\n  margin: auto;\n}\n\n#chart {\n  height: 500px;\n}\n</style>\n"],"mappings":";AAQA,OAAAA,KAAA;AACA,YAAAC,OAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MAAA;MACAC,WAAA;MAAA;MACAC,UAAA;MAAA;MACAC,eAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,aAAA;EACA;EACAC,OAAA;IACAD,cAAA;MACA;MACAT,KAAA,CAAAW,GAAA,2BACAC,IAAA,CAAAC,QAAA;QACA,MAAAV,IAAA,GAAAU,QAAA,CAAAV,IAAA;QACA,MAAAW,SAAA,GAAAX,IAAA,CAAAY,MAAA,EAAAC,GAAA,EAAAC,IAAA,KAAAD,GAAA,GAAAC,IAAA,CAAAC,IAAA;QACA,MAAAC,SAAA,GAAAL,SAAA;;QAEA;QACA,KAAAV,SAAA,GAAAD,IAAA;QACA,KAAAE,WAAA,GAAAF,IAAA,CAAAiB,MAAA,CAAAH,IAAA,IAAAA,IAAA,CAAAC,IAAA,IAAAC,SAAA;QACA,KAAAb,UAAA,GAAAH,IAAA,CAAAiB,MAAA,CAAAH,IAAA,IAAAA,IAAA,CAAAC,IAAA,GAAAC,SAAA;QACA;QACA,KAAAZ,eAAA,QAAAD,UAAA,CAAAS,MAAA,EAAAC,GAAA,EAAAC,IAAA,KAAAD,GAAA,GAAAC,IAAA,CAAAC,IAAA;;QAEA;QACA,KAAAb,WAAA,CAAAgB,IAAA;UAAAC,YAAA;UAAAJ,IAAA,OAAAX;QAAA;QAEA,KAAAgB,WAAA;MACA,GACAC,KAAA,CAAAC,KAAA,IAAAC,OAAA,CAAAD,KAAA,iCAAAA,KAAA;IACA;IACAF,YAAA;MACA,MAAAI,QAAA,GAAAC,QAAA,CAAAC,cAAA;MACA,MAAAC,OAAA,GAAA7B,OAAA,CAAA8B,IAAA,CAAAJ,QAAA;MACA,MAAAK,MAAA;QACAC,OAAA;UACAC,OAAA;UACAC,SAAA;QACA;QACAC,MAAA;UACAC,MAAA;UACAC,IAAA;UAAA;UACAC,GAAA;UAAA;UACAC,KAAA;UAAA;UACA;UACArC,IAAA,OAAAE,WAAA,CAAAoC,GAAA,CAAAxB,IAAA,IAAAA,IAAA,CAAAK,YAAA;QACA;QACAoB,MAAA,GACA;UACAxC,IAAA;UACAyC,IAAA;UACAC,YAAA;UACAC,MAAA;UACAC,KAAA;YACAC,QAAA;YACAZ,SAAA;UACA;UACAhC,IAAA,OAAAE,WAAA,CAAAoC,GAAA,CAAAxB,IAAA;YACAf,IAAA,EAAAe,IAAA,CAAAK,YAAA;YACA0B,KAAA,EAAA/B,IAAA,CAAAC;UACA;QACA,GACA;UACAhB,IAAA;UACAyC,IAAA;UACAE,MAAA;UACAI,SAAA;YACAC,MAAA;UACA;UACA/C,IAAA,OAAAG,UAAA,CAAAmC,GAAA,CAAAxB,IAAA;YACAf,IAAA,EAAAe,IAAA,CAAAK,YAAA;YACA0B,KAAA,EAAA/B,IAAA,CAAAC;UACA;QACA;MAEA;MACAY,OAAA,CAAAqB,SAAA,CAAAnB,MAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
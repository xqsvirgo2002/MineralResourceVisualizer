{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as echarts from 'echarts';\nexport default {\n  name: 'MineralProductionHeatmap',\n  data() {\n    return {\n      heatmapInstance: null,\n      heatmapData: [],\n      countries: [],\n      years: ['2017', '2018', '2019', '2020', '2021']\n    };\n  },\n  mounted() {\n    this.loadHeatmapData();\n  },\n  methods: {\n    loadHeatmapData() {\n      // 假设您有多个工作表的数据，每个工作表代表一种矿产\n      import('@/assets/output.json').then(mineralsData => {\n        Object.keys(mineralsData).forEach((mineral, mineralIndex) => {\n          this.processDataForMineral(mineralsData[mineral], mineralIndex);\n        });\n        this.initHeatmap();\n      });\n    },\n    processDataForMineral(mineralData, mineralIndex) {\n      // 更新国家列表\n      if (mineralIndex === 0) {\n        this.countries = mineralData.map(item => item.Country);\n      }\n      // 处理每种矿产的数据\n      mineralData.forEach(countryData => {\n        this.years.forEach(year => {\n          const countryIndex = this.countries.indexOf(countryData.Country);\n          this.heatmapData.push([mineralIndex, countryIndex, countryData[year]]);\n        });\n      });\n    },\n    initHeatmap() {\n      const heatmapDom = this.$refs.MineralProductionHeatmap;\n      this.heatmapInstance = echarts.init(heatmapDom);\n      const options = {\n        title: {\n          text: '不同矿产在各国各年份的生产量热力图',\n          left: 'center'\n        },\n        tooltip: {\n          position: 'top'\n        },\n        xAxis: {\n          type: 'category',\n          data: Object.keys(this.heatmapData[0]) // 矿产名称\n        },\n        yAxis: {\n          type: 'category',\n          data: this.countries\n        },\n        visualMap: {\n          min: 0,\n          max: 600000000,\n          // 根据数据集的最大值进行调整\n          calculable: true,\n          orient: 'horizontal',\n          left: 'center',\n          bottom: '15%'\n        },\n        series: [{\n          name: '生产量',\n          type: 'heatmap',\n          data: this.heatmapData,\n          label: {\n            show: true\n          },\n          emphasis: {\n            itemStyle: {\n              shadowBlur: 10,\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\n            }\n          }\n        }]\n      };\n      this.heatmapInstance.setOption(options);\n    }\n  }\n};","map":{"version":3,"names":["echarts","name","data","heatmapInstance","heatmapData","countries","years","mounted","loadHeatmapData","methods","then","mineralsData","Object","keys","forEach","mineral","mineralIndex","processDataForMineral","initHeatmap","mineralData","map","item","Country","countryData","year","countryIndex","indexOf","push","heatmapDom","$refs","MineralProductionHeatmap","init","options","title","text","left","tooltip","position","xAxis","type","yAxis","visualMap","min","max","calculable","orient","bottom","series","label","show","emphasis","itemStyle","shadowBlur","shadowColor","setOption"],"sources":["src/components/GlobalMineralHeatMap.vue"],"sourcesContent":["<template>\n    <div>\n        <el-row :gutter=\"20\">\n            <el-col :span=\"24\">\n                <el-card class=\"chart-card\">\n                    <div ref=\"MineralProductionHeatmap\" class=\"chart\"></div>\n                </el-card>\n            </el-col>\n        </el-row>\n        <!-- 这里可以添加分析文本 -->\n    </div>\n</template>\n\n<script>\nimport * as echarts from 'echarts';\n\nexport default {\n    name: 'MineralProductionHeatmap',\n    data() {\n        return {\n            heatmapInstance: null,\n            heatmapData: [],\n            countries: [],\n            years: ['2017', '2018', '2019', '2020', '2021']\n        };\n    },\n    mounted() {\n        this.loadHeatmapData();\n    },\n    methods: {\n        loadHeatmapData() {\n            // 假设您有多个工作表的数据，每个工作表代表一种矿产\n            import('@/assets/output.json').then(mineralsData => {\n                Object.keys(mineralsData).forEach((mineral, mineralIndex) => {\n                    this.processDataForMineral(mineralsData[mineral], mineralIndex);\n                });\n                this.initHeatmap();\n            });\n        },\n        processDataForMineral(mineralData, mineralIndex) {\n            // 更新国家列表\n            if (mineralIndex === 0) {\n                this.countries = mineralData.map(item => item.Country);\n            }\n            // 处理每种矿产的数据\n            mineralData.forEach(countryData => {\n                this.years.forEach(year => {\n                    const countryIndex = this.countries.indexOf(countryData.Country);\n                    this.heatmapData.push([mineralIndex, countryIndex, countryData[year]]);\n                });\n            });\n        },\n        initHeatmap() {\n            const heatmapDom = this.$refs.MineralProductionHeatmap;\n            this.heatmapInstance = echarts.init(heatmapDom);\n\n            const options = {\n                title: {\n                    text: '不同矿产在各国各年份的生产量热力图',\n                    left: 'center'\n                },\n                tooltip: {\n                    position: 'top'\n                },\n                xAxis: {\n                    type: 'category',\n                    data: Object.keys(this.heatmapData[0]) // 矿产名称\n                },\n                yAxis: {\n                    type: 'category',\n                    data: this.countries\n                },\n                visualMap: {\n                    min: 0,\n                    max: 600000000, // 根据数据集的最大值进行调整\n                    calculable: true,\n                    orient: 'horizontal',\n                    left: 'center',\n                    bottom: '15%'\n                },\n                series: [{\n                    name: '生产量',\n                    type: 'heatmap',\n                    data: this.heatmapData,\n                    label: {\n                        show: true\n                    },\n                    emphasis: {\n                        itemStyle: {\n                            shadowBlur: 10,\n                            shadowColor: 'rgba(0, 0, 0, 0.5)'\n                        }\n                    }\n                }]\n            };\n\n            this.heatmapInstance.setOption(options);\n        }\n    }\n};\n</script>\n\n<style scoped>\n/* 添加自定义样式 */\n.chart {\n    width: 100%;\n    height: 700px; /* 为热力图调整高度 */\n    margin-top: 20px;\n}\n</style>\n"],"mappings":";AAcA,YAAAA,OAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,eAAA;MACAC,WAAA;MACAC,SAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,eAAA;EACA;EACAC,OAAA;IACAD,gBAAA;MACA;MACA,+BAAAE,IAAA,CAAAC,YAAA;QACAC,MAAA,CAAAC,IAAA,CAAAF,YAAA,EAAAG,OAAA,EAAAC,OAAA,EAAAC,YAAA;UACA,KAAAC,qBAAA,CAAAN,YAAA,CAAAI,OAAA,GAAAC,YAAA;QACA;QACA,KAAAE,WAAA;MACA;IACA;IACAD,sBAAAE,WAAA,EAAAH,YAAA;MACA;MACA,IAAAA,YAAA;QACA,KAAAX,SAAA,GAAAc,WAAA,CAAAC,GAAA,CAAAC,IAAA,IAAAA,IAAA,CAAAC,OAAA;MACA;MACA;MACAH,WAAA,CAAAL,OAAA,CAAAS,WAAA;QACA,KAAAjB,KAAA,CAAAQ,OAAA,CAAAU,IAAA;UACA,MAAAC,YAAA,QAAApB,SAAA,CAAAqB,OAAA,CAAAH,WAAA,CAAAD,OAAA;UACA,KAAAlB,WAAA,CAAAuB,IAAA,EAAAX,YAAA,EAAAS,YAAA,EAAAF,WAAA,CAAAC,IAAA;QACA;MACA;IACA;IACAN,YAAA;MACA,MAAAU,UAAA,QAAAC,KAAA,CAAAC,wBAAA;MACA,KAAA3B,eAAA,GAAAH,OAAA,CAAA+B,IAAA,CAAAH,UAAA;MAEA,MAAAI,OAAA;QACAC,KAAA;UACAC,IAAA;UACAC,IAAA;QACA;QACAC,OAAA;UACAC,QAAA;QACA;QACAC,KAAA;UACAC,IAAA;UACArC,IAAA,EAAAU,MAAA,CAAAC,IAAA,MAAAT,WAAA;QACA;QACAoC,KAAA;UACAD,IAAA;UACArC,IAAA,OAAAG;QACA;QACAoC,SAAA;UACAC,GAAA;UACAC,GAAA;UAAA;UACAC,UAAA;UACAC,MAAA;UACAV,IAAA;UACAW,MAAA;QACA;QACAC,MAAA;UACA9C,IAAA;UACAsC,IAAA;UACArC,IAAA,OAAAE,WAAA;UACA4C,KAAA;YACAC,IAAA;UACA;UACAC,QAAA;YACAC,SAAA;cACAC,UAAA;cACAC,WAAA;YACA;UACA;QACA;MACA;MAEA,KAAAlD,eAAA,CAAAmD,SAAA,CAAAtB,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
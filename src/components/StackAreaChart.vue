<template>
    <div>
        <el-row :gutter="20">
            <el-col :span="24">
                <el-card class="chart-card">
                    <div ref="StackedAreaChart" class="chart"></div>
                </el-card>
            </el-col>
        </el-row>
        <el-row :gutter="20">
            <el-col :span="24">
                <el-card class="analysis-card">
                    <div class="analysis-text">
                        本图展示了1985年至2021年间不同大陆的矿产总产量的变化。从图中我们可以观察到以下几点：亚洲的矿产产量自1985年以来显著增长，尤其是在21世纪初期，增长速度加快，这反映了亚洲经济快速发展和工业化进程加速的趋势。非洲和拉丁美洲虽然产量增长，但增速相对缓慢。与此同时，欧洲和北美的矿产产量保持相对稳定，体现出成熟经济的稳定需求。整体数据反映了全球矿产资源开发的区域性差异，强调了均衡利用和可持续管理资源的必要性。
                    </div>
                </el-card>
            </el-col>
        </el-row>
    </div>
</template>
  
<script>
import * as echarts from 'echarts';

export default {
    name: 'StackedAreaChart',
    data() {
        return {
            // 填入所有提取的数据
            productionData: {
                '1985': [553611145, 3739473268, 2434569522, 566395211, 2071063053, 280261932, 9645374131],
                '1986': [560389452, 3967356364, 2471557140, 573958486, 2027980977, 292796449, 9894038868],
                '1987': [558162223, 4077926753, 2485274829, 563610024, 2072705805, 322233565, 10079913199],
                '1988': [578429601, 4279286059, 2472914295, 591044007, 2141270229, 304067006, 10367011197],
                '1989': [611700950, 4535660970, 2424486765, 613513369, 2164117026, 332116920, 10681596000],
                '1990': [629191234, 4575870072, 2260313985, 646514806, 2203364391, 347898842, 10663153330],
                '1991': [645653677, 4532820491, 2123060349, 663144692, 2184274275, 362385522, 10511339006],
                '1992': [631548263, 4552094570, 1988491302, 670905309, 2181844083, 374707983, 10399591510],
                '1993': [641442391, 4617161822, 1874985573, 686940025, 2143538949, 386115067, 10350183827],
                '1994': [652593419, 4593040086, 1826668411, 720466025, 2262153843, 392630850, 10447552634],
                '1995': [686972850, 4820268566, 1833548690, 746479446, 2273227243, 415408333, 10775905128],
                '1996': [680883877, 4880406639, 1832372740, 777575760, 2316670697, 429772081, 10917681794],
                '1997': [713277901, 4969566025, 1827942589, 814134583, 2351638894, 462884590, 11139444582],
                '1998': [720075978, 4967282473, 1747147595, 887199743, 2356329541, 477138947, 11155174277],
                '1999': [732165377, 4929839618, 1721201321, 879241004, 2327927155, 484477447, 11074851922],
                '2000': [765733161, 5051128647, 1755973081, 908631865, 2324941284, 515493083, 11321901121],
                '2001': [773456477, 5170247983, 1753407523, 916258957, 2357596851, 542815415, 11513783206],
                '2002': [781715961, 5355794087, 1777355518, 922162854, 2322570961, 560044299, 11719643680],
                '2003': [833951331, 5970984174, 1778623013, 955349598, 2283577245, 573950955, 12396436316],
                '2004': [890333467, 6538112535, 1788545139, 1033685411, 2355162356, 597642134, 13203481042],
                '2005': [944557106, 7069404045, 1749879233, 1068298139, 2343744813, 629117525, 13805000861],
                '2006': [957844493, 7554008909, 1728775009, 1105968273, 2381080452, 643672822, 14371349958],
                '2007': [975719824, 7955646173, 1717633543, 1131860494, 2371567898, 675887993, 14828315925],
                '2008': [996725521, 8290139389, 1700370530, 1122207082, 2403886981, 710182569, 15223512072],
                '2009': [963712118, 8324937462, 1606084844, 1065789961, 2295422815, 730666086, 14986613286],
                '2010': [1009671531, 8921790786, 1621739125, 1128727828, 2355466902, 801950738, 15839346910],
                '2011': [929029242, 9530704600, 1638512869, 1170779425, 2432757654, 818091867, 16519875657],
                '2012': [995271415, 9736632318, 1618131898, 1184530000, 2440184070, 866313912, 16841063613],
                '2013': [965281735, 9858894781, 1574048804, 1171457846, 2494737892, 960974497, 17025395555],
                '2014': [947167188, 9803335402, 1509058627, 1203104664, 2644933240, 1067775345, 17175374466],
                '2015': [940173705, 9820601800, 1487186048, 1196135887, 2632654028, 1138200465, 17214951933],
                '2016': [914921521, 9639168360, 1449203754, 1171648978, 2444041926, 1167849780, 16786834319],
                '2017': [962927752, 9907381544, 1458765377, 1159197977, 2576204452, 1196407350, 17260884452],
                '2018': [975823188, 10350201462, 1417652999, 1110203849, 2767142806, 1210489104, 17831513408],
                '2019': [983718193, 10590686886, 1277179094, 1039705985, 2866382131, 1259950122, 18017622411],
                '2020': [891827710, 10303432479, 1174117284, 956913134, 2652404762, 1249275334, 17227970703],
                '2021': [933736448, 10803723087, 1212291826, 983848976, 2742224818, 1221074462, 17896899617],
            },

            continents: ['Africa', 'Asia', 'Europe', 'Latin America', 'North America', 'Oceania', 'Total']
        };
    },
    mounted() {
        this.chartInstance = echarts.init(this.$refs.StackedAreaChart);
        this.initChart();
    },
    methods: {
        initChart() {
            const option = {
                // ECharts 配置项
                title: {
                    text: '矿产总产量堆积面积图',
                    left: 'center'
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross',
                        label: {
                            backgroundColor: '#6a7985'
                        }
                    }
                },
                legend: {
                    data: this.continents.slice(0, -1), // 不包括 "Total"
                    bottom: '3%'
                },
                toolbox: {
                    feature: {
                        saveAsImage: {}
                    }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '10%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: Object.keys(this.productionData)
                },
                yAxis: {
                    type: 'value'
                },
                series: this.continents.slice(0, -1).map((continent, index) => ({ // 不包括 "Total"
                    name: continent,
                    type: 'line',
                    stack: 'total',
                    areaStyle: {},
                    emphasis: {
                        focus: 'series'
                    },
                    data: Object.values(this.productionData).map(yearData => yearData[index])
                }))
            };

            this.chartInstance.setOption(option);
        }
    }
};
</script>
  
<style scoped>
.chart-card {
    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
}

.chart {
    width: 100%;
    height: 400px;
}

.analysis-card {
  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
  margin-top: 20px;
  padding: 20px;
  background-color: #f7f7f7;
}

.analysis-text {
  font-size: 16px;
  line-height: 1.8;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  text-align: justify;
}
</style>
  